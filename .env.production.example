# ===============================================
# CONFIGURAÃ‡ÃƒO RECOMENDADA PARA PRODUÃ‡ÃƒO
# ===============================================
# Esta configuraÃ§Ã£o oferece:
# - MÃ¡xima confiabilidade (fallback habilitado)
# - Custo otimizado (Groq + Gemini sempre que possÃ­vel)
# - Cache habilitado (economia de 30-50%)
# - Rate limiting para prevenir bans
# ===============================================

# ===========================================
# DATABASE
# ===========================================
DATABASE_URL="postgresql://user:password@localhost:5432/gastocerto_zap?schema=public"

# ===========================================
# REDIS
# ===========================================
REDIS_HOST=localhost
REDIS_PORT=6379

# ===========================================
# AI PROVIDERS - CONFIGURAÃ‡ÃƒO OTIMIZADA
# ===========================================

# OpenAI (Backup - usa crÃ©ditos)
OPENAI_API_KEY=sk-proj-xxxxx

# Google Gemini (Vision - 80% mais barato que OpenAI)
GOOGLE_GEMINI_API_KEY=AIzaSyxxxxx

# Groq (GRÃTIS - Llama 3 + Whisper)
GROQ_API_KEY=gsk_xxxxx

# ===========================================
# AI STRATEGY - CUSTO OTIMIZADO
# ===========================================
# Usa providers gratuitos/baratos primeiro
AI_PROVIDER_TEXT=groq              # Llama 3 (GRÃTIS)
AI_PROVIDER_IMAGE=google_gemini    # Gemini Vision (80% mais barato)
AI_PROVIDER_AUDIO=groq             # Whisper Groq (GRÃTIS)
AI_PROVIDER_CATEGORY=groq          # Llama 3 (GRÃTIS)

# ===========================================
# AI FALLBACK - HABILITADO (Alta Confiabilidade)
# ===========================================
AI_FALLBACK_ENABLED=true                                # âœ… HABILITAR
AI_FALLBACK_MIN_CONFIDENCE=0.7

# Ordem de fallback otimizada (barato â†’ caro)
AI_FALLBACK_TEXT_CHAIN=groq,openai,google_gemini       # Groq â†’ OpenAI â†’ Gemini
AI_FALLBACK_IMAGE_CHAIN=google_gemini,openai            # Gemini â†’ OpenAI
AI_FALLBACK_AUDIO_CHAIN=groq,openai                     # Groq â†’ OpenAI
AI_FALLBACK_CATEGORY_CHAIN=groq,openai,google_gemini   # Groq â†’ OpenAI â†’ Gemini

# ===========================================
# AI RATE LIMITING (Previne bans)
# ===========================================
OPENAI_RATE_LIMIT_RPM=500
OPENAI_RATE_LIMIT_TPM=90000
GEMINI_RATE_LIMIT_RPM=60
GEMINI_RATE_LIMIT_TPM=30000
GROQ_RATE_LIMIT_RPM=30
GROQ_RATE_LIMIT_TPM=15000

# ===========================================
# AI CACHE (Economia de 30-50%)
# ===========================================
AI_CACHE_ENABLED=true              # âœ… HABILITAR
AI_CACHE_TTL=86400                 # 24 horas

# ===========================================
# GASTO CERTO API
# ===========================================
GASTO_CERTO_API_URL=https://api.gastocerto.com
GASTO_CERTO_API_KEY=your-api-key

# ===========================================
# TRANSAÃ‡Ã•ES - CONFIGURAÃ‡ÃƒO
# ===========================================
REQUIRE_CONFIRMATION=true          # Pedir confirmaÃ§Ã£o antes de registrar
AUTO_REGISTER_THRESHOLD=0.85       # Auto-registra se confidence >= 85%
MIN_CONFIDENCE_THRESHOLD=0.5       # Rejeita se confidence < 50%

# ===========================================
# BULL QUEUES
# ===========================================
QUEUE_MESSAGES_CONCURRENCY=20
QUEUE_AI_CONCURRENCY=10
QUEUE_CONFIRMATION_CONCURRENCY=15
QUEUE_ONBOARDING_CONCURRENCY=5
QUEUE_MEDIA_CONCURRENCY=5

# ===========================================
# CENÃRIOS DE USO
# ===========================================

# âœ… CENÃRIO 1: MÃ¡xima Economia (apenas Groq + Gemini)
# - Custo: ~$0.50/mÃªs para 1000 usuÃ¡rios
# - Confiabilidade: MÃ©dia (sem fallback para OpenAI)
# AI_PROVIDER_TEXT=groq
# AI_PROVIDER_IMAGE=google_gemini
# AI_PROVIDER_AUDIO=groq
# AI_FALLBACK_ENABLED=false

# âœ… CENÃRIO 2: Balanceado (Groq/Gemini + OpenAI como backup)
# - Custo: ~$3.125/mÃªs para 1000 usuÃ¡rios
# - Confiabilidade: Alta (fallback habilitado)
# AI_PROVIDER_TEXT=groq
# AI_PROVIDER_IMAGE=google_gemini
# AI_PROVIDER_AUDIO=groq
# AI_FALLBACK_ENABLED=true
# AI_FALLBACK_TEXT_CHAIN=groq,openai,google_gemini

# âœ… CENÃRIO 3: MÃ¡xima Qualidade (OpenAI primeiro)
# - Custo: ~$4.590/mÃªs para 1000 usuÃ¡rios
# - Confiabilidade: MÃ¡xima
# AI_PROVIDER_TEXT=openai
# AI_PROVIDER_IMAGE=openai
# AI_PROVIDER_AUDIO=openai
# AI_FALLBACK_ENABLED=true
# AI_FALLBACK_TEXT_CHAIN=openai,groq,google_gemini

# ===========================================
# RESUMO: O QUE ACONTECE QUANDO OPENAI FALHA
# ===========================================
# 
# âœ… SE AI_FALLBACK_ENABLED=true:
#    1. Tenta Groq (grÃ¡tis)
#    2. Se Groq falhar, tenta OpenAI (pago)
#    3. Se OpenAI falhar (sem crÃ©dito), tenta Gemini
#    4. Se todos falharem, retorna mensagem amigÃ¡vel
#
# âŒ SE AI_FALLBACK_ENABLED=false:
#    1. Groq falha â†’ Retorna mensagem amigÃ¡vel para usuÃ¡rio
#    2. UsuÃ¡rio recebe: "ServiÃ§o de IA temporariamente indisponÃ­vel"
#
# ðŸ’¡ RECOMENDAÃ‡ÃƒO: HABILITAR FALLBACK EM PRODUÃ‡ÃƒO

# Database
DATABASE_URL="postgresql://postgres:12345@localhost:5432/zap?schema=public"
# Redis
REDIS_URL="redis://localhost:6379"
# OU usar configuração individual:
# REDIS_HOST="localhost"
# REDIS_PORT=6379
# REDIS_PASSWORD=""

# Server
NODE_ENV="development"
PORT=3000
LOG_LEVEL="info"

# Baileys WhatsApp
QR_TIMEOUT_MS=120000
MAX_RECONNECT_ATTEMPTS=5
RECONNECT_INTERVAL_MS=10000

# AI Providers (Mix-and-Match)
# Estratégia otimizada: OpenAI (texto) + Gemini (imagem) + Groq (áudio GRÁTIS)
AI_PROVIDER_TEXT="openai"        # openai | google_gemini | groq
AI_PROVIDER_IMAGE="google_gemini" # google_gemini | openai (Gemini 80% mais barato!)
AI_PROVIDER_AUDIO="groq"          # groq | openai (Groq é GRÁTIS!)
AI_PROVIDER_CATEGORY="groq"       # groq | openai | google_gemini

# OpenAI (Texto e fallback) https://platform.openai.com/api-keys
OPENAI_API_KEY=""
OPENAI_MODEL="gpt-4-turbo-preview"
OPENAI_VISION_MODEL="gpt-4-vision-preview"
OPENAI_WHISPER_MODEL="whisper-1"

# Google Gemini (Imagens - RECOMENDADO - 80% mais barato) https://aistudio.google.com/u/1/api-keys
GOOGLE_AI_API_KEY=""
GOOGLE_MODEL="gemini-1.5-pro"

# Groq (Áudio GRÁTIS - RECOMENDADO) https://console.groq.com/keys
GROQ_API_KEY=""
GROQ_MODEL="llama-3.1-70b-versatile"

# Anthropic (Futuro)
# ANTHROPIC_API_KEY="sk-ant-..."
# ANTHROPIC_MODEL="claude-3-5-sonnet-20241022"

# Gasto Certo API
GASTO_CERTO_API_URL="http://localhost:3333/api"
SERVICE_SHARED_SECRET=""
GASTOCERTO_CERTO_API_SERVICE_ID="gastocerto-api"
GASTOCERTO_ZAP_SERVICE_ID="gastocerto-zap"
SERVICE_REQUEST_TIMEOUT_MS="300000"

# Development Auth Bypass (APENAS PARA DESENVOLVIMENTO LOCAL)
# Ative para testar sem precisar da gastocerto-api rodando
# ⚠️  NUNCA use em produção!
DEV_AUTH_BYPASS="false"

# Security
TEST_PHONE_NUMBER="5566996285154"

# Rate Limiting
RATE_LIMIT_MAX_REQUESTS=10
RATE_LIMIT_WINDOW_MS=60000

# Confirmation & Onboarding Timeouts
CONFIRMATION_TIMEOUT_SECONDS=300000
ONBOARDING_TIMEOUT_MS=1800000

# Transaction Confirmation Settings
REQUIRE_CONFIRMATION=true           # true = sempre pede confirmação | false = nunca pede
AUTO_REGISTER_THRESHOLD=0.80        # Se confidence >= 80%, registra automaticamente (sem confirmação)
MIN_CONFIDENCE_THRESHOLD=0.50       # Rejeita transações com confidence < 50%

# Bull Queues Concurrency
QUEUE_MESSAGES_CONCURRENCY=20
QUEUE_AI_CONCURRENCY=10
QUEUE_CONFIRMATION_CONCURRENCY=15
QUEUE_ONBOARDING_CONCURRENCY=5
QUEUE_MEDIA_CONCURRENCY=5

# ===============================================
# AI Rate Limiting (Previne bans de API)
# ===============================================
# Define limites de RPM (Requests Per Minute) e TPM (Tokens Per Minute)
# Se não definido, usa valores padrão conservadores

# OpenAI (tier 1 padrão)
OPENAI_RATE_LIMIT_RPM=500
OPENAI_RATE_LIMIT_TPM=90000

# Google Gemini (free tier)
GEMINI_RATE_LIMIT_RPM=60
GEMINI_RATE_LIMIT_TPM=30000

# Groq (free tier)
GROQ_RATE_LIMIT_RPM=30
GROQ_RATE_LIMIT_TPM=15000

# ===============================================
# AI Response Cache (Economia de 30-50%)
# ===============================================
# Cacheia respostas de IA para evitar reprocessamento
# Usa SHA256 hash do conteúdo + provider + operação

AI_CACHE_ENABLED=true              # Habilitar cache (recomendado)
AI_CACHE_TTL=86400                 # TTL em segundos (24 horas padrão)

# ===============================================
# AI Fallback (Redundância OPCIONAL)
# ===============================================
# Sistema de fallback entre providers quando um falha
# DESABILITADO por padrão - você controla quando usar

AI_FALLBACK_ENABLED=false                                    # true = habilita fallback automático
AI_FALLBACK_MIN_CONFIDENCE=0.7                              # Confiança mínima para aceitar fallback
AI_FALLBACK_TEXT_CHAIN=openai,groq,google_gemini           # Ordem de fallback para texto
AI_FALLBACK_IMAGE_CHAIN=google_gemini,openai                # Ordem de fallback para imagens
AI_FALLBACK_AUDIO_CHAIN=groq,openai                         # Ordem de fallback para áudio
AI_FALLBACK_CATEGORY_CHAIN=groq,openai,google_gemini       # Ordem de fallback para categorias

# Exemplo de uso:
# Se AI_FALLBACK_ENABLED=false (padrão), o sistema retorna erro ao usuário pedindo para habilitar
# Se AI_FALLBACK_ENABLED=true, tenta automaticamente os providers na ordem configurada

# ===========================================
# TELEGRAM BOT (Alternativa ao WhatsApp)
# ===========================================
# Obtenha o token em: https://t.me/BotFather
# Vantagens: Sem QR code, sem erro 515, API oficial grátis
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
